{
  "version": 3,
  "sources": ["../node_modules/color-diff/lib/diff.js", "../node_modules/color-diff/lib/convert.js", "../node_modules/color-diff/lib/palette.js", "../node_modules/color-diff/lib/index.js", "../src/canvas.js", "../src/toolbar.js", "../src/color-palette.js", "../src/log.js", "../src/image-helper.js", "../src/artist.js", "../src/data-transfer-helper.js", "../src/non-blocking-processor.js", "../src/drag-drop-event-listener.js", "../src/dom-helper.js", "../src/floating-panel.js", "../src/settings-panel.js", "../src/hint-assistant.js", "../src/index.js"],
  "sourcesContent": ["/**\n * @author Markus Ekholm\n * @copyright 2012-2016 (c) Markus Ekholm <markus at botten dot org >\n * @license Copyright (c) 2012-2016, Markus Ekholm\n * All rights reserved.\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *    * Redistributions of source code must retain the above copyright\n *      notice, this list of conditions and the following disclaimer.\n *    * Redistributions in binary form must reproduce the above copyright\n *      notice, this list of conditions and the following disclaimer in the\n *      documentation and/or other materials provided with the distribution.\n *    * Neither the name of the author nor the\n *      names of its contributors may be used to endorse or promote products\n *      derived from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL MARKUS EKHOLM BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n/**\n* EXPORTS\n*/\nexports.ciede2000 = ciede2000;\n\n/**\n* IMPORTS\n*/\nvar sqrt = Math.sqrt;\nvar pow = Math.pow;\nvar cos = Math.cos;\nvar atan2 = Math.atan2;\nvar sin = Math.sin;\nvar abs = Math.abs;\nvar exp = Math.exp;\nvar PI = Math.PI;\n\n/**\n * API FUNCTIONS\n */\n\n/**\n* Returns diff between c1 and c2 using the CIEDE2000 algorithm\n* @param {labcolor} c1    Should have fields L,a,b\n* @param {labcolor} c2    Should have fields L,a,b\n* @return {float}   Difference between c1 and c2\n*/\nfunction ciede2000(c1,c2)\n{\n  /**\n   * Implemented as in \"The CIEDE2000 Color-Difference Formula:\n   * Implementation Notes, Supplementary Test Data, and Mathematical Observations\"\n   * by Gaurav Sharma, Wencheng Wu and Edul N. Dalal.\n   */\n\n  // Get L,a,b values for color 1\n  var L1 = c1.L;\n  var a1 = c1.a;\n  var b1 = c1.b;\n\n  // Get L,a,b values for color 2\n  var L2 = c2.L;\n  var a2 = c2.a;\n  var b2 = c2.b;\n\n  // Weight factors\n  var kL = 1;\n  var kC = 1;\n  var kH = 1;\n\n  /**\n   * Step 1: Calculate C1p, C2p, h1p, h2p\n   */\n  var C1 = sqrt(pow(a1, 2) + pow(b1, 2)) //(2)\n  var C2 = sqrt(pow(a2, 2) + pow(b2, 2)) //(2)\n\n  var a_C1_C2 = (C1+C2)/2.0;             //(3)\n\n  var G = 0.5 * (1 - sqrt(pow(a_C1_C2 , 7.0) /\n                          (pow(a_C1_C2, 7.0) + pow(25.0, 7.0)))); //(4)\n\n  var a1p = (1.0 + G) * a1; //(5)\n  var a2p = (1.0 + G) * a2; //(5)\n\n  var C1p = sqrt(pow(a1p, 2) + pow(b1, 2)); //(6)\n  var C2p = sqrt(pow(a2p, 2) + pow(b2, 2)); //(6)\n\n  var h1p = hp_f(b1, a1p); //(7)\n  var h2p = hp_f(b2, a2p); //(7)\n\n  /**\n   * Step 2: Calculate dLp, dCp, dHp\n   */\n  var dLp = L2 - L1; //(8)\n  var dCp = C2p - C1p; //(9)\n\n  var dhp = dhp_f(C1,C2, h1p, h2p); //(10)\n  var dHp = 2*sqrt(C1p*C2p)*sin(radians(dhp)/2.0); //(11)\n\n  /**\n   * Step 3: Calculate CIEDE2000 Color-Difference\n   */\n  var a_L = (L1 + L2) / 2.0; //(12)\n  var a_Cp = (C1p + C2p) / 2.0; //(13)\n\n  var a_hp = a_hp_f(C1,C2,h1p,h2p); //(14)\n  var T = 1-0.17*cos(radians(a_hp-30))+0.24*cos(radians(2*a_hp))+\n    0.32*cos(radians(3*a_hp+6))-0.20*cos(radians(4*a_hp-63)); //(15)\n  var d_ro = 30 * exp(-(pow((a_hp-275)/25,2))); //(16)\n  var RC = sqrt((pow(a_Cp, 7.0)) / (pow(a_Cp, 7.0) + pow(25.0, 7.0)));//(17)\n  var SL = 1 + ((0.015 * pow(a_L - 50, 2)) /\n                sqrt(20 + pow(a_L - 50, 2.0)));//(18)\n  var SC = 1 + 0.045 * a_Cp;//(19)\n  var SH = 1 + 0.015 * a_Cp * T;//(20)\n  var RT = -2 * RC * sin(radians(2 * d_ro));//(21)\n  var dE = sqrt(pow(dLp /(SL * kL), 2) + pow(dCp /(SC * kC), 2) +\n                pow(dHp /(SH * kH), 2) + RT * (dCp /(SC * kC)) *\n                (dHp / (SH * kH))); //(22)\n  return dE;\n}\n\n/**\n * INTERNAL FUNCTIONS\n */\nfunction degrees(n) { return n*(180/PI); }\nfunction radians(n) { return n*(PI/180); }\n\nfunction hp_f(x,y) //(7)\n{\n  if(x === 0 && y === 0) return 0;\n  else{\n    var tmphp = degrees(atan2(x,y));\n    if(tmphp >= 0) return tmphp\n    else           return tmphp + 360;\n  }\n}\n\nfunction dhp_f(C1, C2, h1p, h2p) //(10)\n{\n  if(C1*C2 === 0)              return 0;\n  else if(abs(h2p-h1p) <= 180) return h2p-h1p;\n  else if((h2p-h1p) > 180)     return (h2p-h1p)-360;\n  else if((h2p-h1p) < -180)    return (h2p-h1p)+360;\n  else                         throw(new Error());\n}\n\nfunction a_hp_f(C1, C2, h1p, h2p) { //(14)\n  if(C1*C2 === 0)                                     return h1p+h2p\n  else if(abs(h1p-h2p)<= 180)                         return (h1p+h2p)/2.0;\n  else if((abs(h1p-h2p) > 180) && ((h1p+h2p) < 360))  return (h1p+h2p+360)/2.0;\n  else if((abs(h1p-h2p) > 180) && ((h1p+h2p) >= 360)) return (h1p+h2p-360)/2.0;\n  else                                                throw(new Error());\n}\n\n// Local Variables:\n// allout-layout: t\n// js-indent-level: 2\n// End:\n", "/**\n * @author Markus Ekholm\n * @copyright 2012-2016 (c) Markus Ekholm <markus at botten dot org >\n * @license Copyright (c) 2012-2016, Markus Ekholm\n * All rights reserved.\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *    * Redistributions of source code must retain the above copyright\n *      notice, this list of conditions and the following disclaimer.\n *    * Redistributions in binary form must reproduce the above copyright\n *      notice, this list of conditions and the following disclaimer in the\n *      documentation and/or other materials provided with the distribution.\n *    * Neither the name of the author nor the\n *      names of its contributors may be used to endorse or promote products\n *      derived from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL MARKUS EKHOLM BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n/**\n* EXPORTS\n*/\nexports.rgb_to_lab = rgb_to_lab;\nexports.rgba_to_lab = rgba_to_lab;\n\n/**\n* IMPORTS\n*/\nvar pow  = Math.pow;\nvar sqrt = Math.sqrt;\n\n/**\n * API FUNCTIONS\n */\n\n/**\n* Returns c converted to labcolor. Uses bc as background color,\n* deaults to using white as background color.\n* @param {rgbacolor} c should have fields R,G,B,A\n* @param {rgbcolor} b should have fields R,G,B\n* @return {labcolor} c converted to labcolor\n*/\nfunction rgba_to_lab(c, bc)\n{\n  var bc = typeof bc !== 'undefined' ? bc : {R: 255, G: 255, B:255};\n  var new_c = {R: bc.R + (c.R - bc.R) * c.A,\n               G: bc.G + (c.G - bc.G) * c.A,\n               B: bc.B + (c.B - bc.B) * c.A};\n  return rgb_to_lab(new_c)\n}\n\n/**\n* Returns c converted to labcolor.\n* @param {rgbcolor} c should have fields R,G,B\n* @return {labcolor} c converted to labcolor\n*/\nfunction rgb_to_lab(c)\n{\n  return xyz_to_lab(rgb_to_xyz(c))\n}\n\n/**\n* Returns c converted to xyzcolor.\n* @param {rgbcolor} c should have fields R,G,B\n* @return {xyzcolor} c converted to xyzcolor\n*/\nfunction rgb_to_xyz(c)\n{\n  // Based on http://www.easyrgb.com/index.php?X=MATH&H=02\n  var R = ( c.R / 255 );\n  var G = ( c.G / 255 );\n  var B = ( c.B / 255 );\n\n  if ( R > 0.04045 ) R = pow(( ( R + 0.055 ) / 1.055 ),2.4);\n  else               R = R / 12.92;\n  if ( G > 0.04045 ) G = pow(( ( G + 0.055 ) / 1.055 ),2.4);\n  else               G = G / 12.92;\n  if ( B > 0.04045 ) B = pow(( ( B + 0.055 ) / 1.055 ), 2.4);\n  else               B = B / 12.92;\n\n  R *= 100;\n  G *= 100;\n  B *= 100;\n\n  // Observer. = 2\u00B0, Illuminant = D65\n  var X = R * 0.4124 + G * 0.3576 + B * 0.1805;\n  var Y = R * 0.2126 + G * 0.7152 + B * 0.0722;\n  var Z = R * 0.0193 + G * 0.1192 + B * 0.9505;\n  return {'X' : X, 'Y' : Y, 'Z' : Z};\n}\n\n/**\n* Returns c converted to labcolor.\n* @param {xyzcolor} c should have fields X,Y,Z\n* @return {labcolor} c converted to labcolor\n*/\nfunction xyz_to_lab(c)\n{\n  // Based on http://www.easyrgb.com/index.php?X=MATH&H=07\n  var ref_Y = 100.000;\n  var ref_Z = 108.883;\n  var ref_X = 95.047; // Observer= 2\u00B0, Illuminant= D65\n  var Y = c.Y / ref_Y;\n  var Z = c.Z / ref_Z;\n  var X = c.X / ref_X;\n  if ( X > 0.008856 ) X = pow(X, 1/3);\n  else                X = ( 7.787 * X ) + ( 16 / 116 );\n  if ( Y > 0.008856 ) Y = pow(Y, 1/3);\n  else                Y = ( 7.787 * Y ) + ( 16 / 116 );\n  if ( Z > 0.008856 ) Z = pow(Z, 1/3);\n  else                Z = ( 7.787 * Z ) + ( 16 / 116 );\n  var L = ( 116 * Y ) - 16;\n  var a = 500 * ( X - Y );\n  var b = 200 * ( Y - Z );\n  return {'L' : L , 'a' : a, 'b' : b};\n}\n\n// Local Variables:\n// allout-layout: t\n// js-indent-level: 2\n// End:\n", "/**\n * @author Markus Ekholm\n * @copyright 2012-2016 (c) Markus Ekholm <markus at botten dot org >\n * @license Copyright (c) 2012-2016, Markus Ekholm\n * All rights reserved.\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *    * Redistributions of source code must retain the above copyright\n *      notice, this list of conditions and the following disclaimer.\n *    * Redistributions in binary form must reproduce the above copyright\n *      notice, this list of conditions and the following disclaimer in the\n *      documentation and/or other materials provided with the distribution.\n *    * Neither the name of the author nor the\n *      names of its contributors may be used to endorse or promote products\n *      derived from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL MARKUS EKHOLM BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n/**\n* EXPORTS\n*/\nexports.map_palette         = map_palette;\nexports.map_palette_lab     = map_palette_lab;\nexports.match_palette_lab   = match_palette_lab;\nexports.palette_map_key     = palette_map_key;\nexports.lab_palette_map_key = lab_palette_map_key;\n\n/**\n* IMPORTS\n*/\nvar ciede2000     = require('./diff').ciede2000;\nvar color_convert = require('./convert');\n\n/**\n * API FUNCTIONS\n */\n\n/**\n* Returns the hash key used for a {rgbcolor} in a {palettemap}\n* @param {rgbcolor} c should have fields R,G,B\n* @return {string}\n*/\nfunction palette_map_key(c)\n{\n  var s = \"R\" + c.R + \"B\" + c.B + \"G\" + c.G;\n  if (\"A\" in c) {\n    s = s + \"A\" + c.A;\n  }\n  return s;\n}\n\n/**\n* Returns the hash key used for a {labcolor} in a {labpalettemap}\n* @param {labcolor} c should have fields L,a,b\n* @return {string}\n*/\nfunction lab_palette_map_key(c)\n{\n  return \"L\" + c.L + \"a\" + c.a + \"b\" + c.b;\n}\n\n/**\n* Returns a mapping from each color in a to the closest/farthest color in b\n* @param [{rgbcolor}] a each element should have fields R,G,B\n* @param [{rgbcolor}] b each element should have fields R,G,B\n* @param {rgbcolor} Optional background color when using alpha channels\n* @param 'type' should be the string 'closest' or 'furthest'\n* @return {palettemap}\n*/\nfunction map_palette(a, b, type, bc)\n{\n  var c = {};\n  bc = typeof bc !== 'undefined' ? bc : {R: 255, G: 255, B:255};\n  type = type || 'closest';\n  for (var idx1 = 0; idx1 < a.length; idx1 += 1){\n    var color1 = a[idx1];\n    var best_color      = undefined;\n    var best_color_diff = undefined;\n    for (var idx2 = 0; idx2 < b.length; idx2 += 1)\n    {\n      var color2 = b[idx2];\n      var current_color_diff = diff(color1, color2, bc);\n\n      if((best_color == undefined) ||\n         ((type === 'closest') && (current_color_diff < best_color_diff)))\n      {\n        best_color      = color2;\n        best_color_diff = current_color_diff;\n        continue;\n      }\n      if((type === 'furthest') && (current_color_diff > best_color_diff))\n      {\n        best_color      = color2;\n        best_color_diff = current_color_diff;\n        continue;\n      }\n    }\n    c[palette_map_key(color1)] = best_color;\n  }\n  return c;\n}\n\n/**\n* Returns the closest (or furthest) color to target_color in palette, operating in the L,a,b colorspace for performance\n* @param {labcolor} target_color should have fields L,a,b\n* @param [{labcolor}] palette each element should have fields L,a,b\n* @param 'find_furthest' should be falsy to find the closest color\n* @return {labcolor}\n*/\nfunction match_palette_lab(target_color, palette, find_furthest)\n{\n  var color2, current_color_diff;\n  var best_color      = palette[0];\n  var best_color_diff = ciede2000(target_color, best_color);\n  for (var idx2 = 1, l = palette.length; idx2 < l; idx2 += 1)\n  {\n    color2 = palette[idx2];\n    current_color_diff = ciede2000(target_color, color2);\n\n    if(\n      (!find_furthest && (current_color_diff < best_color_diff)) ||\n      (find_furthest && (current_color_diff > best_color_diff))\n    )\n    {\n      best_color      = color2;\n      best_color_diff = current_color_diff;\n    }\n  }\n  return best_color;\n}\n\n/**\n* Returns a mapping from each color in a to the closest color in b\n* @param [{labcolor}] a each element should have fields L,a,b\n* @param [{labcolor}] b each element should have fields L,a,b\n* @param 'type' should be the string 'closest' or 'furthest'\n* @return {labpalettemap}\n*/\nfunction map_palette_lab(a, b, type)\n{\n  var c = {};\n  var find_furthest = type === 'furthest';\n  for (var idx1 = 0; idx1 < a.length; idx1 += 1)\n  {\n    var color1 = a[idx1];\n    c[lab_palette_map_key(color1)] = match_palette_lab(color1, b, find_furthest);\n  }\n  return c;\n}\n\n/**\n * INTERNAL FUNCTIONS\n */\n\nfunction diff(c1, c2, bc)\n{\n  var conv_c1 = color_convert.rgb_to_lab;\n  var conv_c2 = color_convert.rgb_to_lab;\n  var rgba_conv = function(x){ return color_convert.rgba_to_lab(x, bc); };\n  if (\"A\" in c1) {\n    conv_c1 = rgba_conv;\n  }\n  if (\"A\" in c2) {\n    conv_c2 = rgba_conv;\n  }\n  c1 = conv_c1(c1);\n  c2 = conv_c2(c2);\n  return ciede2000(c1, c2);\n}\n\n// Local Variables:\n// allout-layout: t\n// js-indent-level: 2\n// End:\n", "'use strict';\n\nvar diff = require('./diff');\nvar convert = require('./convert');\nvar palette = require('./palette');\n\nvar color = module.exports = {};\n\ncolor.diff                = diff.ciede2000;\ncolor.rgb_to_lab          = convert.rgb_to_lab;\ncolor.rgba_to_lab         = convert.rgba_to_lab;\ncolor.map_palette         = palette.map_palette;\ncolor.palette_map_key     = palette.palette_map_key;\ncolor.map_palette_lab     = palette.map_palette_lab;\ncolor.lab_palette_map_key = palette.lab_palette_map_key;\ncolor.match_palette_lab   = palette.match_palette_lab;\n\ncolor.closest = function(target, relative, bc) {\n    var key = color.palette_map_key(target);\n    bc = typeof bc !== 'undefined' ? bc : {R: 255, G: 255, B:255};\n    var result = color.map_palette([target], relative, 'closest', bc);\n\n    return result[key];\n};\n\ncolor.furthest = function(target, relative, bc) {\n    var key = color.palette_map_key(target);\n    bc = typeof bc !== 'undefined' ? bc : {R: 255, G: 255, B:255};\n    var result = color.map_palette([target], relative, 'furthest', bc);\n\n    return result[key];\n};\n\ncolor.closest_lab = function(target, relative) {\n    return color.match_palette_lab(target, relative, false);\n};\n\ncolor.furthest_lab = function(target, relative) {\n    return color.match_palette_lab(target, relative, true);\n};\n", "export default function (canvasElement) {\n    const context = canvasElement.getContext('2d');\n\n    let getMouseCoords = function (canvasCoords) {\n        let bounds = canvasElement.getBoundingClientRect();\n\n        return {\n            x: canvasCoords.x * bounds.width / 800 + bounds.x,\n            y: canvasCoords.y * bounds.height / 600 + bounds.y\n        };\n    };\n\n    let createMouseEvent = function (name, coords) {\n        return new PointerEvent(name, {\n            pointerId: 1,\n            pointerType: \"mouse\",\n            bubbles: true,\n            clientX: coords.x,\n            clientY: coords.y,\n            button: 0 // Left click\n        });\n    };\n\n    return {\n        size: { width: 800, height: 600 },\n\n        draw: function (coords) {\n            let startMouseCoords = getMouseCoords(coords[0]);\n            canvasElement.dispatchEvent(createMouseEvent(\"pointerdown\", startMouseCoords));\n\n            for (let i = 1; i < coords.length; i++) {\n                let mouseCoords = getMouseCoords(coords[i]);\n                canvasElement.dispatchEvent(createMouseEvent(\"pointermove\", mouseCoords));\n            }\n\n            let endMouseCoords = getMouseCoords(coords[coords.length - 1]);\n            canvasElement.dispatchEvent(createMouseEvent(\"pointerup\", endMouseCoords));\n        }\n    };\n};\n", "const toRgbObject = function (rgbString) {\n    let parts = rgbString.substring(4, rgbString.length - 1).split(\", \");\n    return { r: parseInt(parts[0]), g: parseInt(parts[1]), b: parseInt(parts[2]) };\n};\n\nconst toRgbString = function (rgbObject) {\n    return `rgb(${rgbObject.r}, ${rgbObject.g}, ${rgbObject.b})`;\n};\n\nexport default function (domHelper) {\n    let colorElements = Array.prototype.slice.call(domHelper.getColorElements());\n    let colors = colorElements.map(e => toRgbObject(e.style.backgroundColor));\n    let colorElementsLookup = new Map(colorElements.map(e => [ e.style.backgroundColor, e ]));\n\n    let sizeElements = domHelper.getSizeElements();\n    let sizeElementsLookup = {\n        4: sizeElements[0],\n        10: sizeElements[1],\n        20: sizeElements[2],\n        32: sizeElements[3],\n        40: sizeElements[4],\n    };\n\n    return {\n        getColors: () => colors,\n        setColor: color => {\n            let rgbString = toRgbString(color);\n            let colorElement = colorElementsLookup.get(rgbString);\n            colorElement.dispatchEvent(new PointerEvent(\"pointerdown\"));\n        },\n        getPenDiameters: () => [4, 10, 20, 32, 40],\n        setPenDiameter: diameter => { sizeElementsLookup[diameter].click(); },\n        clear: () => { domHelper.getClearToolElement().click(); },\n        setPenTool: () => { domHelper.getPenToolElement().click(); },\n        setFillTool: () => { domHelper.getFillToolElement().click(); },\n        isEnabled: () => domHelper.getToolbarElement().style.display !== \"none\"\n    };\n};\n", "import color from \"color-diff\";\n\nexport default function (rgbPalette) {\n    let labPalette = rgbPalette\n        .map(rgb => color.rgb_to_lab({ R: rgb.r, G: rgb.g, B: rgb.b }));\n\n    return {\n        getClosestColorIndex: function (rgb, cache) {\n            let key = (rgb.r << 16) | (rgb.g << 8) | rgb.b;\n            if (key in cache) return cache[key];\n\n            let lab = color.rgb_to_lab({ R: rgb.r, G: rgb.g, B: rgb.b });\n            let minDelta = Number.MAX_VALUE;\n            let closestIndex = 0;\n\n            for (let i = 0; i < labPalette.length; i++) {\n                let delta = color.diff(lab, labPalette[i]);\n                if (delta >= minDelta) continue;\n\n                minDelta = delta;\n                closestIndex = i;\n            }\n\n            cache[key] = closestIndex;\n            return closestIndex;\n        },\n        getClosestColor: function (rgb, cache) {\n            return rgbPalette[this.getClosestColorIndex(rgb, cache)];\n        },\n        getColor: index => rgbPalette[index]\n    }\n};\n", "export default function (message) {\n    if (!loggingEnabled) return;\n\n    console.log(`skribbl.io AutoDraw: ${message}`);\n};\n\nexport const setLoggingEnabled = function (enabled) {\n    loggingEnabled = Boolean(enabled);\n};\n\nlet loggingEnabled = false;\n", "import log from \"./log\";\n\nexport function fillImage(size, image) {\n    let factor = Math.max(size.width / image.width, size.height / image.height);\n\n    let dw = factor * image.width;\n    let dh = factor * image.height;\n\n    let dx = (size.width - dw) / 2;\n    let dy = (size.height - dh) / 2;\n\n    return scale(size, ctx => ctx.drawImage(image, dx, dy, dw, dh));\n};\n\nexport function fitImage(size, image) {\n    let factor = Math.min(size.width / image.width, size.height / image.height);\n\n    let dw = factor * image.width;\n    let dh = factor * image.height;\n\n    return scale({ width: dw, height: dh }, ctx => ctx.drawImage(image, 0, 0, dw, dh));\n};\n\nlet scale = function (size, draw) {\n    log(`Scaling image to ${size.width} x ${size.height}...`);\n\n    let canvas = document.createElement(\"canvas\");\n    canvas.width = size.width;\n    canvas.height = size.height;\n\n    let context = canvas.getContext(\"2d\");\n    context.imageSmoothingEnabled = false; // Smoothing creates weird edge color artifacts in a downsampled image.\n    draw(context);\n\n    return context.getImageData(0, 0, canvas.width, canvas.height);\n};\n\nexport function loadImage(url) {\n    return new Promise((resolve, reject) => {\n        const image = new Image;\n        image.crossOrigin = \"Anonymous\";\n        image.onload = function () {\n            const blockedByCors = image.height === 0 && image.width === 0;\n            const executor = blockedByCors ? reject : resolve;\n            executor(image);\n        };\n        image.onerror = reject;\n\n        log(`Attempting to load image: ${url}...`);\n        image.src = url;\n    });\n};\n", "import createColorPalette from \"./color-palette\";\nimport { fitImage, fillImage } from \"./image-helper\";\nimport log from \"./log\";\n\nconst nominalPenDiameter = 4;\n// Treat the pen like it's smaller to prevent blank horizontal lines.\nconst realPenDiameter = 2.9;\n\nconst qualityScaleMap = [0.35, 0.6, 0.9, 1.2, 1.6];\nconst minQualityScale = 0.2;\nconst maxQualityScale = 2;\nconst fillSettings = {\n    minRatio: 0.45,\n    edgeAgreementRatio: 0.75,\n    lightBackgroundLuma: 190,\n    darkBackgroundLuma: 65\n};\nconst backgroundSampleStops = [0, 0.25, 0.5, 0.75, 1];\n\nconst quantize = function (value, bits) {\n    const shift = 8 - bits;\n    if (shift <= 0) return value;\n    const rounded = (value + (1 << (shift - 1))) >> shift;\n    return Math.max(0, Math.min(255, rounded << shift));\n};\n\nconst pickPenDiameter = function (length, penMode) {\n    if (penMode !== \"fast\") return nominalPenDiameter;\n\n    if (length >= 200) return 40;\n    if (length >= 120) return 32;\n    if (length >= 60) return 20;\n    if (length >= 30) return 10;\n    return nominalPenDiameter;\n};\n\nconst getLuma = function (color) {\n    return 0.2126 * color.r + 0.7152 * color.g + 0.0722 * color.b;\n};\n\nexport default function (canvas, toolbar) {\n    const colorPalette = createColorPalette(toolbar.getColors());\n    const availablePenDiameters = toolbar.getPenDiameters()\n        .slice()\n        .sort((a, b) => a - b);\n\n    const clampQualityScale = function (scale) {\n        if (!Number.isFinite(scale) || scale <= 0) return 1;\n        return Math.max(minQualityScale, Math.min(maxQualityScale, scale));\n    };\n\n    const snapPenDiameter = function (diameter) {\n        let closest = availablePenDiameters[0];\n        let smallestDiff = Math.abs(closest - diameter);\n        for (const candidate of availablePenDiameters) {\n            const diff = Math.abs(candidate - diameter);\n            if (diff < smallestDiff) {\n                closest = candidate;\n                smallestDiff = diff;\n            }\n        }\n        return closest;\n    };\n\n    const getMostCommonColorInfo = function (lines) {\n        const counts = new Array(toolbar.getColors().length).fill(0);\n        let total = 0;\n        for (const line of lines) {\n            const weight = line.endX - line.startX + 1;\n            counts[line.colorIndex] += weight;\n            total += weight;\n        }\n\n        let bestIndex = 0;\n        let bestScore = -1;\n        for (let i = 0; i < counts.length; i++) {\n            if (counts[i] > bestScore) {\n                bestScore = counts[i];\n                bestIndex = i;\n            }\n        }\n\n        const ratio = total > 0 ? bestScore / total : 0;\n        return { index: bestIndex, ratio, source: \"dominant\" };\n    };\n\n    const fillCanvas = function (color) {\n        return [\n            function () {\n                toolbar.setFillTool();\n                toolbar.setColor(color);\n                canvas.draw([\n                    { x: 0, y: 0 },\n                    { x: 0, y: 0 }\n                ]);\n            }\n        ];\n    };\n\n    const getEdgeSampleCoordinates = function (width, height) {\n        if (!width || !height) return [];\n        const coords = [];\n        const maxX = width - 1;\n        const maxY = height - 1;\n        for (const stop of backgroundSampleStops) {\n            const x = Math.round(maxX * stop);\n            const y = Math.round(maxY * stop);\n            coords.push({ x, y: 0 });\n            coords.push({ x, y: maxY });\n            coords.push({ x: 0, y });\n            coords.push({ x: maxX, y });\n        }\n\n        const unique = new Map();\n        for (const coord of coords) {\n            const key = `${coord.x},${coord.y}`;\n            if (!unique.has(key)) unique.set(key, coord);\n        }\n\n        return Array.from(unique.values());\n    };\n\n    const sampleColorIndexAt = function (image, x, y, options, colorCache) {\n        if (!image.width || !image.height) return 0;\n        const clampedX = Math.max(0, Math.min(image.width - 1, Math.round(x)));\n        const clampedY = Math.max(0, Math.min(image.height - 1, Math.round(y)));\n        const offset = (clampedY * image.width + clampedX) * 4;\n        const data = image.data;\n        const pixelColor = {\n            r: quantize(data[offset + 0], options.colorQuantization),\n            g: quantize(data[offset + 1], options.colorQuantization),\n            b: quantize(data[offset + 2], options.colorQuantization)\n        };\n        return colorPalette.getClosestColorIndex(pixelColor, colorCache);\n    };\n\n    const detectEdgeBackgroundIndex = function (image, options, colorCache) {\n        const coords = getEdgeSampleCoordinates(image.width, image.height);\n        if (!coords.length) return null;\n\n        const counts = new Map();\n        for (const coord of coords) {\n            const colorIndex = sampleColorIndexAt(image, coord.x, coord.y, options, colorCache);\n            counts.set(colorIndex, (counts.get(colorIndex) || 0) + 1);\n        }\n\n        const sorted = Array.from(counts.entries()).sort((a, b) => b[1] - a[1]);\n        if (!sorted.length) return null;\n\n        const [bestIndex, bestCount] = sorted[0];\n        const ratio = bestCount / coords.length;\n        if (ratio >= fillSettings.edgeAgreementRatio) {\n            return { index: bestIndex, ratio, source: \"edge\" };\n        }\n\n        return null;\n    };\n\n    const extractLines = function (image, options, colorCache) {\n        const data = image.data;\n        const lines = [];\n\n        let i = 0;\n        for (let y = 0; y < image.height; y++) {\n            let lineStartX = 0;\n            let lineColorIndex = null;\n\n            for (let x = 0; x < image.width; x++, i += 4) {\n                const pixelColor = {\n                    r: quantize(data[i + 0], options.colorQuantization),\n                    g: quantize(data[i + 1], options.colorQuantization),\n                    b: quantize(data[i + 2], options.colorQuantization)\n                };\n\n                const colorIndex = colorPalette.getClosestColorIndex(pixelColor, colorCache);\n\n                if (lineColorIndex === null) {\n                    lineColorIndex = colorIndex;\n                    lineStartX = x;\n                    continue;\n                }\n\n                if (lineColorIndex !== colorIndex) {\n                    lines.push({ y: y, startX: lineStartX, endX: x - 1, colorIndex: lineColorIndex });\n                    lineStartX = x;\n                    lineColorIndex = colorIndex;\n                }\n            }\n\n            if (lineColorIndex !== null) {\n                lines.push({ y: y, startX: lineStartX, endX: image.width - 1, colorIndex: lineColorIndex });\n            }\n        }\n\n        return lines;\n    };\n\n    const drawLines = function (lines, offset, options, state, scale) {\n        const commands = [];\n        const scaleX = scale?.x ?? 1;\n        const scaleY = scale?.y ?? 1;\n        const coverageScale = options.penMode === \"fast\" ? Math.max(scaleY, 0.25) : 1;\n\n        for (const line of lines) {\n            const length = (line.endX - line.startX + 1) * scaleX;\n            const basePenDiameter = pickPenDiameter(length, options.penMode);\n            const penDiameter = snapPenDiameter(basePenDiameter * coverageScale);\n            const color = colorPalette.getColor(line.colorIndex);\n\n            commands.push(function () {\n                if (state.tool !== \"pen\") {\n                    toolbar.setPenTool();\n                    state.tool = \"pen\";\n                }\n                if (state.colorIndex !== line.colorIndex) {\n                    toolbar.setColor(color);\n                    state.colorIndex = line.colorIndex;\n                }\n                if (state.penDiameter !== penDiameter) {\n                    toolbar.setPenDiameter(penDiameter);\n                    state.penDiameter = penDiameter;\n                }\n                const startX = (line.startX + offset.x) * scaleX;\n                const endX = (line.endX + offset.x) * scaleX;\n                const y = (line.y + offset.y) * scaleY;\n                canvas.draw([\n                    { x: startX * realPenDiameter, y: y * realPenDiameter },\n                    { x: endX * realPenDiameter, y: y * realPenDiameter }\n                ]);\n            });\n        }\n\n        return commands;\n    };\n\n    return {\n        draw: function (image, options) {\n            const unclampedQualityScale = qualityScaleMap[options.quality - 1] || 0.7;\n            const qualityScale = clampQualityScale(unclampedQualityScale);\n            const maxDrawingSize = {\n                width: canvas.size.width / realPenDiameter,\n                height: canvas.size.height / realPenDiameter\n            };\n            const samplingSize = {\n                width: Math.max(8, Math.round(maxDrawingSize.width * qualityScale)),\n                height: Math.max(8, Math.round(maxDrawingSize.height * qualityScale))\n            };\n            const scaleMultiplier = {\n                x: maxDrawingSize.width / samplingSize.width,\n                y: maxDrawingSize.height / samplingSize.height\n            };\n\n            const scaleImage = options.scaleMode === \"fill\" ? fillImage : fitImage;\n            const scaledImage = scaleImage(samplingSize, image);\n\n            log(\"Generating draw commands...\");\n            let commands = [];\n\n            const colorCache = {};\n            const allLines = extractLines(scaledImage, options, colorCache);\n            const edgeFillInfo = options.enableFill ? detectEdgeBackgroundIndex(scaledImage, options, colorCache) : null;\n            const dominantFillInfo = getMostCommonColorInfo(allLines);\n            const fillInfo = edgeFillInfo || dominantFillInfo;\n            const fillColorIndex = fillInfo ? fillInfo.index : null;\n            const fillColor = fillColorIndex != null ? colorPalette.getColor(fillColorIndex) : null;\n            const fillLuma = fillColor ? getLuma(fillColor) : 0;\n            const meetsRatioRequirement = fillInfo && (fillInfo.source === \"edge\" || fillInfo.ratio >= fillSettings.minRatio);\n            const hasHighContrastBackground = fillColor\n                && (fillLuma >= fillSettings.lightBackgroundLuma || fillLuma <= fillSettings.darkBackgroundLuma);\n            const shouldFill = Boolean(options.enableFill && fillColor && meetsRatioRequirement && hasHighContrastBackground);\n\n            if (shouldFill && fillColor) {\n                commands = commands.concat(fillCanvas(fillColor));\n            }\n\n            // Don't need to draw lines that match the fill color.\n            const filteredLines = shouldFill && fillColorIndex != null\n                ? allLines.filter(line => line.colorIndex !== fillColorIndex)\n                : allLines;\n\n            let sortedLines = filteredLines;\n\n            if (options.colorBatching) {\n                const buckets = new Map();\n                for (const line of filteredLines) {\n                    if (!buckets.has(line.colorIndex)) buckets.set(line.colorIndex, []);\n                    buckets.get(line.colorIndex).push(line);\n                }\n\n                const orderedBuckets = Array.from(buckets.values())\n                    .sort((a, b) => b.length - a.length);\n\n                sortedLines = orderedBuckets.flatMap(bucket =>\n                    bucket.sort((l1, l2) => (l2.endX - l2.startX) - (l1.endX - l1.startX))\n                );\n            } else {\n                sortedLines = filteredLines\n                    // Randomize drawing order so the overall image fills in evenly.\n                    .sort(() => 0.5 - Math.random())\n                    // Long and short lines take the same time to draw. Draw long ones first so the image fills in faster.\n                    .sort((l1, l2) => {\n                        const length1 = l1.endX - l1.startX;\n                        const length2 = l2.endX - l2.startX;\n                        return length1 > length2 ? -1 : length1 == length2 ? 0 : 1;\n                    });\n            }\n\n            let drawingOffset = {\n                x: (samplingSize.width - scaledImage.width) / 2 + 0.5,\n                y: (samplingSize.height - scaledImage.height) / 2 + 0.5\n            };\n            const drawState = { tool: null, colorIndex: null, penDiameter: null };\n            commands = commands.concat(drawLines(sortedLines, drawingOffset, options, drawState, scaleMultiplier));\n\n            log(`${commands.length} commands generated.`);\n            return commands;\n        }\n    };\n};\n", "export function getImgFileUrl(dataTransfer) {\n    if (!dataTransfer.files.length) return null;\n\n    let file = dataTransfer.files[0];\n    if (!file.type.startsWith(\"image/\")) return null;\n\n    return URL.createObjectURL(dataTransfer.files[0]);\n};\n\nexport function getClipboardImgUrl(clipboardData) {\n    if (!clipboardData || !clipboardData.items) return null;\n\n    for (const item of clipboardData.items) {\n        if (item.type && item.type.startsWith(\"image/\")) {\n            const file = item.getAsFile();\n            if (!file) continue;\n            return URL.createObjectURL(file);\n        }\n    }\n\n    return null;\n}\n\nexport function getImgElementSrc(dataTransfer) {\n    let html = dataTransfer.getData(\"text/html\");\n    if (!html) return null;\n\n    let container = document.createElement(\"div\");\n    container.innerHTML = html;\n\n    let imgs = container.getElementsByTagName(\"img\");\n    if (!imgs.length) return;\n\n    return imgs[0].getAttribute(\"src\");\n};\n", "import log from \"./log\";\n\nexport default function (commands, shouldStop, options = {}) {\n    const batchSize = Math.max(1, options.batchSize || 150);\n    const schedule = options.schedule || requestAnimationFrame;\n    const onFinish = options.onFinish || null;\n    const onStop = options.onStop || null;\n    const maxCommandsPerSecond = Number.isFinite(options.maxCommandsPerSecond) && options.maxCommandsPerSecond > 0\n        ? options.maxCommandsPerSecond\n        : null;\n    let index = 0;\n    let allowance = 0;\n    let lastTimestamp = null;\n\n    const process = function (timestamp) {\n        const now = typeof timestamp === \"number\" ? timestamp : performance.now();\n        if (maxCommandsPerSecond) {\n            if (lastTimestamp === null) {\n                lastTimestamp = now;\n            }\n            const deltaMs = Math.max(0, now - lastTimestamp);\n            lastTimestamp = now;\n            allowance = Math.min(maxCommandsPerSecond, allowance + (maxCommandsPerSecond * deltaMs) / 1000);\n            if (allowance < 1) {\n                schedule(process);\n                return;\n            }\n        }\n\n        if (index >= commands.length) {\n            log(\"Processing finished.\");\n            if (onFinish) onFinish();\n            return;\n        }\n\n        if (shouldStop && shouldStop()) {\n            log(\"Processing stopped.\");\n            if (onStop) onStop();\n            return;\n        }\n\n        const frameBudget = maxCommandsPerSecond\n            ? Math.min(Math.floor(allowance), batchSize)\n            : batchSize;\n        if (frameBudget <= 0) {\n            schedule(process);\n            return;\n        }\n\n        const startIndex = index;\n        const end = Math.min(index + frameBudget, commands.length);\n        for (; index < end; index++) {\n            commands[index]();\n        }\n\n        if (maxCommandsPerSecond) {\n            const executed = end - startIndex;\n            allowance = Math.max(0, allowance - executed);\n        }\n\n        if ((commands.length - index) % 200 === 0 && commands.length - index > 0) {\n            log(`${commands.length - index} commands remaining to process.`);\n        }\n\n        schedule(process);\n    };\n\n    log(`Processing ${commands.length} commands...`);\n    process(performance.now());\n};\n", "export default function (element, onEnter, onLeave, onDrop) {\n   let debouncer = 0;\n\n   element.addEventListener(\"dragenter\", function (event) {\n      if (debouncer === 0) { onEnter(event); }\n      debouncer++;\n   });\n\n   element.addEventListener(\"dragleave\", function (event) {\n      debouncer--;\n      if (debouncer === 0) { onLeave(event); }\n   });\n\n   element.addEventListener(\"drop\", function (event) {\n      debouncer = 0;\n      onDrop(event);\n   });\n\n   // MDN: If you want to allow a drop, you must prevent the default handling by cancelling the event. \n   element.addEventListener(\"dragover\", function (event) {\n      event.preventDefault();\n   });\n};\n", "export default function (document) {\n    const overlay = document.createElement(\"div\");\n    overlay.id = \"autoDrawOverlay\";\n    document.getElementById('game-canvas').appendChild(overlay);\n\n    return {\n        getCanvasContainerElement: () => document.getElementById('game-canvas'),\n        getCanvasElement: () => document.querySelector('#game-canvas canvas'),\n        getColorElements: () => document.querySelectorAll('#game-toolbar .colors .color'),\n        getSizeElements: () => document.querySelectorAll('#game-toolbar .sizes .size'),\n        getClearToolElement: () => document.querySelector('#game-toolbar .tool[data-tooltip=\"Clear\"]'),\n        getPenToolElement: () => document.querySelector('#game-toolbar .tool[data-tooltip=\"Brush\"]'),\n        getFillToolElement: () => document.querySelector('#game-toolbar .tool[data-tooltip=\"Fill\"]'),\n        getToolbarElement: () => document.getElementById('game-toolbar'),\n\n        hideCanvasOverlay: delay => setTimeout(function () {\n            document.body.classList.remove(\"showingAutodrawOverlay\");\n            }, delay || 0),\n\n        showCanvasOverlay: text => {\n            overlay.innerText = text;\n            document.body.classList.add(\"showingAutodrawOverlay\");\n        }\n    };\n};\n", "const clamp = (value, min, max) => Math.max(min, Math.min(max, value));\nconst isFiniteNumber = value => typeof value === \"number\" && Number.isFinite(value);\n\nconst resolvePosition = (source, panel, fallback) => {\n    if (typeof source === \"function\") {\n        const result = source(panel);\n        return typeof result === \"object\" && result ? result : fallback;\n    }\n    if (source && typeof source === \"object\") {\n        return source;\n    }\n    return fallback;\n};\n\nexport default function createFloatingPanel(doc, options = {}) {\n    if (!doc) throw new Error(\"Document reference is required to create a floating panel.\");\n\n    const {\n        id,\n        title = \"\",\n        parent = doc.body,\n        panelClass = \"\",\n        headerClass = \"autoDrawHeader\",\n        headerId,\n        bodyClass = \"\",\n        bodyId,\n        collapseClass = \"autoDrawCollapse\",\n        collapseButtonId,\n        initiallyCollapsed = false,\n        initialPosition,\n        getDefaultPosition,\n        onPositionChange,\n        onCollapsedChange,\n        subtitle = \"\",\n        zIndex\n    } = options;\n\n    const panel = doc.createElement(\"div\");\n    panel.id = id;\n    panel.className = [\"floatingPanel\", panelClass].filter(Boolean).join(\" \");\n    if (typeof zIndex === \"number\") {\n        panel.style.zIndex = String(zIndex);\n    }\n\n    const header = doc.createElement(\"div\");\n    header.className = [\"autoDrawHeader\", headerClass].filter(Boolean).join(\" \");\n    if (headerId) header.id = headerId;\n\n    const titleWrapper = doc.createElement(\"div\");\n    titleWrapper.className = \"floatingPanelHeaderTitle\";\n\n    const titleEl = doc.createElement(\"span\");\n    titleEl.className = \"floatingPanelTitle\";\n    titleEl.textContent = title;\n\n    const subtitleEl = doc.createElement(\"span\");\n    subtitleEl.className = \"floatingPanelSubtitle\";\n    subtitleEl.textContent = subtitle;\n    subtitleEl.hidden = !subtitle;\n\n    titleWrapper.appendChild(titleEl);\n    titleWrapper.appendChild(subtitleEl);\n\n    const headerActions = doc.createElement(\"div\");\n    headerActions.className = \"floatingPanelHeaderActions\";\n\n    const collapseButton = doc.createElement(\"button\");\n    collapseButton.type = \"button\";\n    collapseButton.className = collapseClass;\n    if (collapseButtonId) collapseButton.id = collapseButtonId;\n    collapseButton.textContent = initiallyCollapsed ? \"+\" : \"\u2013\";\n\n    headerActions.appendChild(collapseButton);\n\n    header.appendChild(titleWrapper);\n    header.appendChild(headerActions);\n\n    const body = doc.createElement(\"div\");\n    body.className = [\"floatingPanelBody\", bodyClass].filter(Boolean).join(\" \");\n    if (bodyId) body.id = bodyId;\n\n    panel.appendChild(header);\n    panel.appendChild(body);\n    parent.appendChild(panel);\n\n    if (initiallyCollapsed) {\n        panel.classList.add(\"collapsed\");\n    }\n\n    const defaultPositionFn = typeof getDefaultPosition === \"function\"\n        ? getDefaultPosition\n        : () => ({ left: 12, top: 120 });\n\n    const clampPositionToViewport = pos => {\n        const width = panel.offsetWidth || 280;\n        const height = panel.offsetHeight || 200;\n        const ww = window.innerWidth || (width + 16);\n        const wh = window.innerHeight || (height + 16);\n        const safeLeft = isFiniteNumber(pos?.left) ? pos.left : 12;\n        const safeTop = isFiniteNumber(pos?.top) ? pos.top : 120;\n        return {\n            left: clamp(safeLeft, 8, Math.max(8, ww - width - 8)),\n            top: clamp(safeTop, 8, Math.max(8, wh - height - 8))\n        };\n    };\n\n    const initial = resolvePosition(initialPosition, panel, defaultPositionFn(panel));\n    let position = clampPositionToViewport(initial);\n\n    const applyPosition = next => {\n        position = clampPositionToViewport(next || position);\n        panel.style.left = `${position.left}px`;\n        panel.style.top = `${position.top}px`;\n    };\n\n    applyPosition(position);\n\n    const emitPosition = () => {\n        if (typeof onPositionChange === \"function\") {\n            onPositionChange({ ...position });\n        }\n    };\n\n    const handleResize = () => {\n        applyPosition(position);\n        emitPosition();\n    };\n\n    window.addEventListener(\"resize\", handleResize);\n\n    const isInteractiveTarget = target => Boolean(target?.closest(\"button, input, select, textarea, a\"));\n\n    const startDrag = event => {\n        if (event.button !== 0) return;\n        if (isInteractiveTarget(event.target)) return;\n        event.preventDefault();\n        const startX = event.clientX;\n        const startY = event.clientY;\n        const rect = panel.getBoundingClientRect();\n        const startLeft = rect.left;\n        const startTop = rect.top;\n\n        const move = moveEvent => {\n            const dx = moveEvent.clientX - startX;\n            const dy = moveEvent.clientY - startY;\n            applyPosition({\n                left: startLeft + dx,\n                top: startTop + dy\n            });\n        };\n\n        const end = () => {\n            doc.removeEventListener(\"mousemove\", move);\n            doc.removeEventListener(\"mouseup\", end);\n            emitPosition();\n        };\n\n        doc.addEventListener(\"mousemove\", move);\n        doc.addEventListener(\"mouseup\", end);\n    };\n\n    header.addEventListener(\"mousedown\", startDrag);\n\n    // Double-click to reset position feature removed\n\n    const setCollapsed = collapsed => {\n        panel.classList.toggle(\"collapsed\", collapsed);\n        collapseButton.textContent = collapsed ? \"+\" : \"\u2013\";\n        if (typeof onCollapsedChange === \"function\") {\n            onCollapsedChange(collapsed);\n        }\n    };\n\n    collapseButton.addEventListener(\"click\", () => {\n        setCollapsed(!panel.classList.contains(\"collapsed\"));\n    });\n\n    const setSubtitle = text => {\n        subtitleEl.textContent = text || \"\";\n        subtitleEl.hidden = !text;\n    };\n\n    const setTitle = text => {\n        titleEl.textContent = text || \"\";\n    };\n\n    const destroy = () => {\n        window.removeEventListener(\"resize\", handleResize);\n        header.removeEventListener(\"mousedown\", startDrag);\n    };\n\n    return {\n        panel,\n        header,\n        body,\n        collapseButton,\n        headerActions,\n        titleEl,\n        subtitleEl,\n        setSubtitle,\n        setTitle,\n        setCollapsed,\n        isCollapsed: () => panel.classList.contains(\"collapsed\"),\n        getPosition: () => ({ ...position }),\n        destroy\n    };\n}\n", "import createFloatingPanel from \"./floating-panel\";\n\nconst STORAGE_KEY = \"skribbl-autodraw-settings-v3\";\n\nconst DEFAULT_SETTINGS = {\n    preset: \"fast\",\n    quality: 3, // 1..5\n    colorQuantization: 6, // bits 4..8\n    colorBatching: true,\n    penMode: \"fast\", // accurate | fast\n    scaleMode: \"fit\", // fit | fill\n    enableFill: true,\n    useCorsProxy: true,\n    showAdvanced: false,\n    debugLogging: false,\n    panelPosition: { left: null, top: 120 }\n};\n\nconst PRESETS = {\n    fast: {\n        quality: 2,\n        colorQuantization: 5,\n        colorBatching: true,\n        penMode: \"fast\",\n        scaleMode: \"fit\",\n        enableFill: true\n    },\n    balanced: {\n        quality: 3,\n        colorQuantization: 6,\n        colorBatching: true,\n        penMode: \"fast\",\n        scaleMode: \"fit\",\n        enableFill: true\n    },\n    quality: {\n        quality: 5,\n        colorQuantization: 8,\n        colorBatching: false,\n        penMode: \"accurate\",\n        scaleMode: \"fit\",\n        enableFill: true\n    }\n};\n\nconst clamp = (value, min, max) => Math.max(min, Math.min(max, value));\n\nconst loadSettings = function () {\n    try {\n        const saved = JSON.parse(localStorage.getItem(STORAGE_KEY) || \"{}\");\n        return { ...DEFAULT_SETTINGS, ...saved };\n    } catch (error) {\n        return { ...DEFAULT_SETTINGS };\n    }\n};\n\nconst saveSettings = function (settings) {\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(settings));\n};\n\nconst createRange = function (id, min, max, value) {\n    const input = document.createElement(\"input\");\n    input.type = \"range\";\n    input.id = id;\n    input.min = min;\n    input.max = max;\n    input.step = 1;\n    input.value = value;\n    return input;\n};\n\nconst createCheckbox = function (id, checked) {\n    const input = document.createElement(\"input\");\n    input.type = \"checkbox\";\n    input.id = id;\n    input.checked = checked;\n    input.className = \"autoDrawCheckboxInput\";\n\n    const visual = document.createElement(\"span\");\n    visual.className = \"autoDrawCheckboxVisual\";\n\n    const wrapper = document.createElement(\"span\");\n    wrapper.className = \"autoDrawCheckboxWrapper\";\n    wrapper.appendChild(input);\n    wrapper.appendChild(visual);\n\n    input._autoDrawWrapper = wrapper;\n    return input;\n};\n\nconst createRadioGroup = function (name, options, value) {\n    const wrapper = document.createElement(\"div\");\n    wrapper.className = \"autoDrawRadioGroup\";\n\n    for (const option of options) {\n        const label = document.createElement(\"label\");\n        label.className = \"autoDrawRadio\";\n\n        const input = document.createElement(\"input\");\n        input.type = \"radio\";\n        input.name = name;\n        input.value = option.value;\n        input.checked = option.value === value;\n\n        const text = document.createElement(\"span\");\n        text.textContent = option.label;\n\n        label.appendChild(input);\n        label.appendChild(text);\n        wrapper.appendChild(label);\n    }\n\n    return wrapper;\n};\n\nconst createSelect = function (id, options, value) {\n    const select = document.createElement(\"select\");\n    select.id = id;\n    for (const option of options) {\n        const opt = document.createElement(\"option\");\n        opt.value = option.value;\n        opt.textContent = option.label;\n        if (option.value === value) opt.selected = true;\n        select.appendChild(opt);\n    }\n    return select;\n};\n\nconst createRow = function (labelText, input, valueEl, tooltipText) {\n    const row = document.createElement(\"label\");\n    row.className = \"autoDrawRow\";\n    if (input.classList && input.classList.contains(\"autoDrawRadioGroup\")) {\n        row.classList.add(\"autoDrawRow--full\");\n    }\n    if (valueEl) {\n        row.classList.add(\"autoDrawRow--hasValue\");\n    }\n    const label = document.createElement(\"span\");\n    label.className = \"autoDrawLabel\";\n    label.textContent = labelText;\n    if (tooltipText) {\n        label.setAttribute(\"data-tip\", tooltipText);\n    }\n    row.appendChild(label);\n    const control = input && input._autoDrawWrapper ? input._autoDrawWrapper : input;\n    if (control) {\n        row.appendChild(control);\n    }\n    if (valueEl) row.appendChild(valueEl);\n    return row;\n};\n\nexport default function createSettingsPanel(doc) {\n    const settings = loadSettings();\n\n    const PANEL_WIDTH_PX = 280;\n\n    const getStoredPanelPosition = function () {\n        const stored = settings.panelPosition || {};\n        if (typeof stored.left === \"number\" && Number.isFinite(stored.left)) {\n            return { left: stored.left, top: typeof stored.top === \"number\" ? stored.top : 120 };\n        }\n        if (typeof stored.right === \"number\" && Number.isFinite(stored.right)) {\n            const left = Math.max(8, window.innerWidth - PANEL_WIDTH_PX - stored.right);\n            const normalized = { left, top: typeof stored.top === \"number\" ? stored.top : 120 };\n            settings.panelPosition = normalized;\n            saveSettings(settings);\n            return normalized;\n        }\n        return null;\n    };\n\n    const floatingPanel = createFloatingPanel(doc, {\n        id: \"autoDrawPanel\",\n        title: \"AutoDraw\",\n        bodyClass: \"autoDrawBody\",\n        collapseClass: \"autoDrawCollapse\",\n        initialPosition: getStoredPanelPosition(),\n        getDefaultPosition: panelEl => {\n            const width = panelEl?.offsetWidth || PANEL_WIDTH_PX;\n            const left = Math.max(8, window.innerWidth - width - 12);\n            return { left, top: 120 };\n        },\n        onPositionChange: position => {\n            settings.panelPosition = { left: position.left, top: position.top };\n            saveSettings(settings);\n        },\n        zIndex: 9999\n    });\n\n    const { body } = floatingPanel;\n\n    const presetInput = createRadioGroup(\"autoDrawPreset\", [\n        { value: \"fast\", label: \"Fast\" },\n        { value: \"balanced\", label: \"Balanced\" },\n        { value: \"quality\", label: \"Quality\" }\n    ], settings.preset);\n\n    const advancedToggle = createCheckbox(\"autoDrawAdvanced\", settings.showAdvanced);\n    const debugToggle = createCheckbox(\"autoDrawDebug\", settings.debugLogging);\n\n    const qualityValue = doc.createElement(\"span\");\n    qualityValue.className = \"autoDrawValue\";\n    qualityValue.textContent = String(settings.quality);\n    const qualityInput = createRange(\"autoDrawQuality\", 1, 5, settings.quality);\n\n    const quantValue = doc.createElement(\"span\");\n    quantValue.className = \"autoDrawValue\";\n    quantValue.textContent = String(settings.colorQuantization);\n    const quantInput = createRange(\"autoDrawQuant\", 4, 8, settings.colorQuantization);\n\n    const batchingInput = createCheckbox(\"autoDrawBatching\", settings.colorBatching);\n    const fillInput = createCheckbox(\"autoDrawFill\", settings.enableFill);\n    const proxyInput = createCheckbox(\"autoDrawProxy\", settings.useCorsProxy);\n\n    const penModeInput = createSelect(\"autoDrawPenMode\", [\n        { value: \"accurate\", label: \"Accurate\" },\n        { value: \"fast\", label: \"Fast\" }\n    ], settings.penMode);\n\n    const scaleModeInput = createSelect(\"autoDrawScaleMode\", [\n        { value: \"fit\", label: \"Fit\" },\n        { value: \"fill\", label: \"Fill\" }\n    ], settings.scaleMode);\n\n    const stopButton = doc.createElement(\"button\");\n    stopButton.id = \"autoDrawStop\";\n    stopButton.textContent = \"Stop\";\n\n    const status = doc.createElement(\"div\");\n    status.id = \"autoDrawStatus\";\n    status.textContent = \"Idle\";\n\n    const estimate = doc.createElement(\"div\");\n    estimate.id = \"autoDrawEstimate\";\n    estimate.textContent = \"\";\n\n    body.appendChild(createRow(\"Mode\", presetInput));\n    body.appendChild(createRow(\"Advanced\", advancedToggle, null, \"Show expert controls\"));\n\n    const advancedSection = doc.createElement(\"div\");\n    advancedSection.className = \"autoDrawAdvanced\";\n    advancedSection.appendChild(createRow(\"Quality\", qualityInput, qualityValue, \"Higher = more detail, slower\"));\n    advancedSection.appendChild(createRow(\"Color bits\", quantInput, quantValue, \"Lower = fewer colors, faster\"));\n    advancedSection.appendChild(createRow(\"Batch by color\", batchingInput, null, \"Fewer color switches\"));\n    advancedSection.appendChild(createRow(\"Fill background\", fillInput, null, \"Fill canvas with dominant color\"));\n    advancedSection.appendChild(createRow(\"CORS proxy\", proxyInput, null, \"Try proxy if image host blocks CORS\"));\n    advancedSection.appendChild(createRow(\"Pen mode\", penModeInput, null, \"Fast uses larger strokes\"));\n    advancedSection.appendChild(createRow(\"Scale\", scaleModeInput, null, \"Fit keeps aspect ratio\"));\n    advancedSection.appendChild(createRow(\"Debug logs\", debugToggle, null, \"Enable console logs\"));\n\n    body.appendChild(advancedSection);\n    body.appendChild(stopButton);\n    body.appendChild(status);\n    body.appendChild(estimate);\n\n    const listeners = [];\n\n    const applyPreset = function (presetId) {\n        const preset = PRESETS[presetId];\n        if (!preset) return;\n        settings.preset = presetId;\n        settings.quality = preset.quality;\n        settings.colorQuantization = preset.colorQuantization;\n        settings.colorBatching = preset.colorBatching;\n        settings.penMode = preset.penMode;\n        settings.scaleMode = preset.scaleMode;\n        settings.enableFill = preset.enableFill;\n\n        qualityInput.value = settings.quality;\n        quantInput.value = settings.colorQuantization;\n        batchingInput.checked = settings.colorBatching;\n        fillInput.checked = settings.enableFill;\n        penModeInput.value = settings.penMode;\n        scaleModeInput.value = settings.scaleMode;\n\n        presetInput.querySelectorAll(\"input[type=radio]\").forEach(input => {\n            input.checked = input.value === presetId;\n        });\n    };\n\n    const updateAdvancedVisibility = function () {\n        advancedSection.style.display = settings.showAdvanced ? \"grid\" : \"none\";\n    };\n\n    const updateSettings = function () {\n        settings.quality = clamp(parseInt(qualityInput.value, 10), 1, 5);\n        settings.colorQuantization = clamp(parseInt(quantInput.value, 10), 4, 8);\n        settings.colorBatching = batchingInput.checked;\n        settings.enableFill = fillInput.checked;\n        settings.useCorsProxy = proxyInput.checked;\n        settings.penMode = penModeInput.value;\n        settings.scaleMode = scaleModeInput.value;\n        const presetChecked = presetInput.querySelector(\"input[type=radio]:checked\");\n        settings.preset = presetChecked ? presetChecked.value : settings.preset;\n        settings.showAdvanced = advancedToggle.checked;\n        settings.debugLogging = debugToggle.checked;\n\n        qualityValue.textContent = String(settings.quality);\n        quantValue.textContent = String(settings.colorQuantization);\n\n        updateAdvancedVisibility();\n        saveSettings(settings);\n        listeners.forEach(listener => listener({ ...settings }));\n    };\n\n    const inputs = [\n        advancedToggle,\n        qualityInput,\n        quantInput,\n        batchingInput,\n        fillInput,\n        proxyInput,\n        penModeInput,\n        scaleModeInput,\n        debugToggle\n    ];\n\n    inputs.forEach(input => input.addEventListener(\"input\", updateSettings));\n    inputs.forEach(input => input.addEventListener(\"change\", updateSettings));\n\n    presetInput.querySelectorAll(\"input[type=radio]\").forEach(input => {\n        input.addEventListener(\"change\", () => {\n            applyPreset(input.value);\n            updateSettings();\n        });\n    });\n\n    applyPreset(settings.preset);\n    updateAdvancedVisibility();\n    updateSettings();\n\n    return {\n        getSettings: () => ({ ...settings }),\n        onChange: listener => listeners.push(listener),\n        setStatus: text => { status.textContent = text; },\n        setEstimate: text => { estimate.textContent = text || \"\"; },\n        stopButton\n    };\n}\n", "import createFloatingPanel from \"./floating-panel\";\n\nconst WORDLIST_URLS = [\n    \"https://api.npoint.io/91ac00bc3d335f00e13f\",\n    \"https://skribbliohints.github.io/words.json\"\n];\n\nconst CACHE_KEY = \"skribbl-hints-cache-v1\";\nconst ENABLE_KEY = \"skribbl-hints-enabled\";\nconst LANG_KEY = \"skribbl-hints-lang\";\nconst CACHE_TTL_MS = 1000 * 60 * 60 * 24 * 3; // 3 days\nconst POS_KEY = \"skribbl-hints-pos\";\nconst WORD_CHECK_INTERVAL_MS = 500;\nconst MAX_RENDERED_RESULTS = 200;\nconst TOP_INLINE_RESULTS = 3;\n\nconst loadPanelPosition = function () {\n    try {\n        const saved = JSON.parse(localStorage.getItem(POS_KEY) || \"{}\");\n        if (typeof saved.left === \"number\" && typeof saved.top === \"number\") {\n            return { left: saved.left, top: saved.top };\n        }\n    } catch (error) {\n        /* ignore */\n    }\n    return null;\n};\n\nconst savePanelPosition = function (pos) {\n    try {\n        localStorage.setItem(POS_KEY, JSON.stringify({ left: pos.left, top: pos.top }));\n    } catch (error) {\n        /* ignore */\n    }\n};\n\nconst safeJsonParse = function (text) {\n    try {\n        return JSON.parse(text);\n    } catch (error) {\n        return null;\n    }\n};\n\nconst loadCachedWordList = function () {\n    const cached = safeJsonParse(localStorage.getItem(CACHE_KEY));\n    if (!cached) return null;\n    if (!Array.isArray(cached.words) || typeof cached.timestamp !== \"number\") return null;\n    const isFresh = Date.now() - cached.timestamp < CACHE_TTL_MS;\n    return isFresh ? cached.words : null;\n};\n\nconst saveCachedWordList = function (words) {\n    const payload = { timestamp: Date.now(), words };\n    localStorage.setItem(CACHE_KEY, JSON.stringify(payload));\n};\n\nconst fetchWithTimeout = function (url, timeoutMs = 8000) {\n    return new Promise((resolve, reject) => {\n        const timer = setTimeout(() => reject(new Error(\"timeout\")), timeoutMs);\n        fetch(url)\n            .then(response => {\n                clearTimeout(timer);\n                if (!response.ok) throw new Error(`HTTP ${response.status}`);\n                return response.json();\n            })\n            .then(resolve)\n            .catch(reject);\n    });\n};\n\nconst fetchWordList = async function () {\n    const cached = loadCachedWordList();\n    if (cached) return cached;\n\n    for (const url of WORDLIST_URLS) {\n        try {\n            const data = await fetchWithTimeout(url);\n            if (Array.isArray(data)) {\n                saveCachedWordList(data);\n                return data;\n            }\n            if (data && Array.isArray(data.words)) {\n                saveCachedWordList(data.words);\n                return data.words;\n            }\n        } catch (error) {\n            // Try next URL\n        }\n    }\n    throw new Error(\"Unable to load word list\");\n};\n\nconst buildRegex = function (pattern) {\n    const sanitized = pattern.trim();\n    if (!sanitized || !sanitized.includes(\"_\")) return null;\n    // Escape regex specials, then replace placeholder tokens.\n    const escaped = sanitized.replace(/[-/\\\\^$*+?.()|[\\]{}]/g, \"\\\\$&\");\n    const body = escaped\n        // underscores become \"any non-space, non-quote, non-dash\"\n        .replace(/_/g, \"[^\\\\s\\\\\\\"-]\")\n        // literal spaces become \\s to match space\n        .replace(/\\s+/g, \"\\\\s+\");\n    return new RegExp(`^${body}$`, \"i\");\n};\n\nconst filterWords = function (words, pattern) {\n    const regex = buildRegex(pattern);\n    if (!regex) return [];\n    return words.filter(word => regex.test(word)).sort((a, b) => a.localeCompare(b, undefined, { sensitivity: \"base\" }));\n};\n\nconst filterBySearch = function (words, searchTerm) {\n    const term = searchTerm.trim().toLowerCase();\n    if (!term) return words;\n    return words.filter(w => w.toLowerCase().includes(term));\n};\n\nconst createPanel = function (doc) {\n    const floatingPanel = createFloatingPanel(doc, {\n        id: \"hintAssistantPanel\",\n        title: \"Skribbl Hints\",\n        bodyClass: \"hintAssistantBody\",\n        collapseClass: \"autoDrawCollapse\",\n        subtitle: \"Loading word list...\",\n        initialPosition: loadPanelPosition(),\n        getDefaultPosition: () => ({ left: 12, top: 120 }),\n        onPositionChange: savePanelPosition,\n        zIndex: 9998\n    });\n\n    const { panel, body, setSubtitle } = floatingPanel;\n\n    const enableRow = doc.createElement(\"label\");\n    enableRow.className = \"hintAssistantRow hintAssistantRow--split\";\n    const enableLabel = doc.createElement(\"span\");\n    enableLabel.textContent = \"Hints\";\n    const enableWrapper = doc.createElement(\"span\");\n    enableWrapper.className = \"autoDrawCheckboxWrapper\";\n    const enableInput = doc.createElement(\"input\");\n    enableInput.type = \"checkbox\";\n    enableInput.id = \"hintAssistantEnable\";\n    enableInput.className = \"autoDrawCheckboxInput\";\n    const enableVisual = doc.createElement(\"span\");\n    enableVisual.className = \"autoDrawCheckboxVisual\";\n    enableWrapper.appendChild(enableInput);\n    enableWrapper.appendChild(enableVisual);\n    enableRow.appendChild(enableLabel);\n    enableRow.appendChild(enableWrapper);\n\n    const langRow = doc.createElement(\"div\");\n    langRow.className = \"hintAssistantRow\";\n    const langLabel = doc.createElement(\"span\");\n    langLabel.textContent = \"Language\";\n    const langSelect = doc.createElement(\"select\");\n    langSelect.id = \"hintAssistantLang\";\n    langRow.appendChild(langLabel);\n    langRow.appendChild(langSelect);\n\n    const searchRow = doc.createElement(\"div\");\n    searchRow.className = \"hintAssistantRow\";\n    const search = doc.createElement(\"input\");\n    search.type = \"text\";\n    search.placeholder = \"Filter results\";\n    search.id = \"hintAssistantSearch\";\n    searchRow.appendChild(search);\n\n    const hintInfo = doc.createElement(\"div\");\n    hintInfo.id = \"hintAssistantInfo\";\n    hintInfo.textContent = \"Click to fill. Ctrl/Cmd click submits.\";\n\n    const hintList = doc.createElement(\"div\");\n    hintList.id = \"hintAssistantHints\";\n    hintList.textContent = \"Waiting for a pattern...\";\n\n    const inner = doc.createElement(\"div\");\n    inner.className = \"hintAssistantInner\";\n    inner.appendChild(langRow);\n    inner.appendChild(searchRow);\n    inner.appendChild(hintInfo);\n    inner.appendChild(hintList);\n\n    body.appendChild(enableRow);\n    body.appendChild(inner);\n\n    return { panel, body, hintList, enableInput, search, langSelect, inner, setSubtitle };\n};\n\nconst renderHints = function (doc, { hintList, inputChat, formChat }, words, pattern) {\n    hintList.innerHTML = \"\";\n    if (!pattern || !pattern.includes(\"_\")) {\n        hintList.textContent = \"Waiting for a pattern...\";\n        return;\n    }\n    if (!words.length) {\n        hintList.textContent = \"No hints for this pattern.\";\n        return;\n    }\n\n    words.slice(0, MAX_RENDERED_RESULTS).forEach(word => {\n        const item = doc.createElement(\"button\");\n        item.className = \"hintAssistantHint\";\n        item.type = \"button\";\n        item.textContent = word;\n        item.title = \"Click to fill. Ctrl/Cmd click submits.\";\n\n        item.addEventListener(\"click\", event => {\n            if (!inputChat) return;\n            inputChat.value = word;\n            inputChat.focus();\n            if (event.ctrlKey || event.metaKey) {\n                if (formChat) {\n                    formChat.dispatchEvent(new Event(\"submit\", { bubbles: true, cancelable: true }));\n                }\n            }\n        });\n\n        hintList.appendChild(item);\n    });\n};\n\nexport default function createHintAssistant(doc) {\n    if (doc.getElementById(\"hintAssistantPanel\")) return null;\n\n    const inputChat = doc.querySelector(\"#game-chat form.chat-form input[type=text]\");\n    const formChat = doc.querySelector(\"#game-chat form.chat-form\");\n    if (!inputChat || !formChat) return null;\n\n    const { hintList, enableInput, search, langSelect, inner, setSubtitle } = createPanel(doc);\n\n    let enabled = localStorage.getItem(ENABLE_KEY) !== \"0\";\n    let wordList = [];\n    let lastPattern = \"\";\n    let ready = false;\n    const languageSelect = doc.querySelector(\"#item-settings-language\");\n    const storedLang = localStorage.getItem(LANG_KEY);\n\n    const populateLangSelect = function () {\n        const seen = new Set();\n        const addOption = (value, label) => {\n            if (seen.has(value)) return;\n            const opt = doc.createElement(\"option\");\n            opt.value = value;\n            opt.textContent = label;\n            langSelect.appendChild(opt);\n            seen.add(value);\n        };\n\n        if (languageSelect) {\n            Array.from(languageSelect.options).forEach(opt => {\n                const val = opt.value || opt.textContent || \"unknown\";\n                addOption(val, opt.textContent || val);\n            });\n        }\n\n        if (!seen.size) {\n            addOption(\"0\", \"English\");\n            addOption(\"1\", \"German\");\n        }\n    };\n\n    const getLanguageLabel = function () {\n        const manualOpt = langSelect.options[langSelect.selectedIndex];\n        if (manualOpt) return (manualOpt.textContent || \"Unknown\").trim();\n        return \"Unknown\";\n    };\n\n    const persistEnabled = function () {\n        localStorage.setItem(ENABLE_KEY, enabled ? \"1\" : \"0\");\n    };\n\n    const updateStatus = function (text) {\n        setSubtitle(text);\n    };\n\n    const updateEnabledUi = function () {\n        enableInput.checked = enabled;\n        inner.style.display = enabled ? \"\" : \"none\";\n        const langLabel = getLanguageLabel();\n        if (!enabled) {\n            updateStatus(`Hints disabled (Alt to enable) | Lang: ${langLabel}`);\n            return;\n        }\n        if (ready) {\n            updateStatus(`Loaded ${wordList.length} words | Lang: ${langLabel}`);\n        }\n    };\n\n    const getPattern = function () {\n        const container = doc.querySelector(\"#game-word .hints .container\");\n        if (!container) return \"\";\n        const hintEls = Array.from(container.querySelectorAll(\".hint\"));\n        if (!hintEls.length) return \"\";\n        const chars = [];\n        for (const el of hintEls) {\n            if (el.classList.contains(\"word-length\")) continue;\n            const raw = el.textContent || \"\";\n            const t = raw.trim();\n            if (t === \"_\") {\n                chars.push(\"_\");\n            } else if (t === \"\") {\n                // spaces between words are rendered as blank hints\n                chars.push(\" \");\n            } else {\n                chars.push(t[0]);\n            }\n        }\n        return chars.join(\"\");\n    };\n\n    const inlineContainer = doc.createElement(\"div\");\n    inlineContainer.id = \"hintAssistantInline\";\n    const attachInline = function () {\n        const chat = doc.getElementById(\"game-chat\");\n        const chatForm = chat ? chat.querySelector(\".chat-form\") : null;\n        if (chat && chatForm) {\n            // Insert inline hints above the chat input\n            if (inlineContainer.parentElement !== chat || inlineContainer.nextSibling !== chatForm) {\n                chat.insertBefore(inlineContainer, chatForm);\n            }\n        }\n    };\n    attachInline();\n\n    const renderInlineTop = function (matches) {\n        if (!enabled) {\n            if (inlineContainer.parentElement) {\n                inlineContainer.parentElement.removeChild(inlineContainer);\n            }\n            return;\n        }\n        inlineContainer.innerHTML = \"\";\n        if (!matches.length) return;\n        matches.slice(0, TOP_INLINE_RESULTS).forEach(word => {\n            const chip = doc.createElement(\"button\");\n            chip.type = \"button\";\n            chip.className = \"hintAssistantInlineChip\";\n            chip.textContent = word;\n            chip.title = \"Click to send guess.\";\n            chip.addEventListener(\"click\", () => {\n                if (!inputChat || !formChat) return;\n                inputChat.value = word;\n                inputChat.focus();\n                formChat.dispatchEvent(new Event(\"submit\", { bubbles: true, cancelable: true }));\n            });\n            inlineContainer.appendChild(chip);\n        });\n        attachInline();\n    };\n\n    const sync = function () {\n        attachInline();\n        if (!enabled) {\n            inlineContainer.innerHTML = \"\";\n            return;\n        }\n        const pattern = getPattern();\n        if (pattern === lastPattern && ready) return;\n        lastPattern = pattern;\n        if (!ready) return;\n        const matches = filterWords(wordList, pattern);\n        const filtered = filterBySearch(matches, search.value || \"\");\n        renderHints(doc, { hintList, inputChat, formChat }, filtered, pattern);\n        renderInlineTop(filtered);\n    };\n\n    fetchWordList()\n        .then(words => {\n            wordList = words;\n            ready = true;\n            updateStatus(`Loaded ${words.length} words | Lang: ${getLanguageLabel()}`);\n            sync();\n            updateEnabledUi();\n        })\n        .catch(() => {\n            updateStatus(\"Failed to load word list\");\n        });\n\n    setInterval(sync, WORD_CHECK_INTERVAL_MS);\n\n    doc.addEventListener(\"keyup\", event => {\n        if (event.key !== \"Alt\") return;\n        enabled = !enabled;\n        persistEnabled();\n        lastPattern = \"\"; // force rerender inline/top3 on re-enable\n        updateEnabledUi();\n        sync();\n        if (!enabled && inlineContainer.parentElement) {\n            inlineContainer.parentElement.removeChild(inlineContainer);\n        }\n    });\n\n    enableInput.addEventListener(\"change\", () => {\n        enabled = enableInput.checked;\n        persistEnabled();\n        lastPattern = \"\"; // force rerender inline/top3 on re-enable\n        updateEnabledUi();\n        sync();\n        if (!enabled && inlineContainer.parentElement) {\n            inlineContainer.parentElement.removeChild(inlineContainer);\n        }\n    });\n\n    search.addEventListener(\"input\", () => {\n        lastPattern = \"\"; // force recompute with filter\n        sync();\n    });\n\n    langSelect.addEventListener(\"change\", () => {\n        localStorage.setItem(LANG_KEY, langSelect.value || \"\");\n        lastPattern = \"\"; // refresh inline/top3 after lang change\n        updateEnabledUi();\n        sync();\n    });\n\n    populateLangSelect();\n    if (storedLang) {\n        const opt = Array.from(langSelect.options).find(o => o.value === storedLang);\n        if (opt) opt.selected = true;\n    } else if (languageSelect) {\n        langSelect.value = languageSelect.value;\n    }\n\n    updateEnabledUi();\n\n    const observeLanguage = function () {\n        if (!languageSelect) return;\n        languageSelect.addEventListener(\"change\", () => {\n            if (!localStorage.getItem(LANG_KEY)) {\n                langSelect.value = languageSelect.value;\n            }\n            updateEnabledUi();\n            sync();\n        });\n    };\n\n    observeLanguage();\n\n    return {\n        enable() {\n            enabled = true;\n            persistEnabled();\n            updateEnabledUi();\n            sync();\n        },\n        disable() {\n            enabled = false;\n            persistEnabled();\n            updateEnabledUi();\n        }\n    };\n}\n", "import createCanvas from \"./canvas\";\nimport createToolbar from \"./toolbar\";\nimport createArtist from \"./artist\";\nimport { getImgFileUrl, getImgElementSrc, getClipboardImgUrl } from \"./data-transfer-helper\";\nimport { loadImage } from \"./image-helper\";\nimport log, { setLoggingEnabled } from \"./log\";\nimport processWithoutBlocking from \"./non-blocking-processor\";\nimport listenForDragDropEvents from \"./drag-drop-event-listener\";\nimport createDomHelper from \"./dom-helper\";\nimport createSettingsPanel from \"./settings-panel\";\nimport createHintAssistant from \"./hint-assistant\";\n\nconst domHelper = createDomHelper(document);\nconst clearToolElement = domHelper.getClearToolElement();\nconst canvas = createCanvas(domHelper.getCanvasElement());\nconst toolbar = createToolbar(domHelper);\nconst artist = createArtist(canvas, toolbar);\nconst settingsPanel = createSettingsPanel(document);\n\nlet hintAssistantInstance = null;\nconst startHintAssistant = function () {\n    if (hintAssistantInstance) return true;\n    hintAssistantInstance = createHintAssistant(document) || null;\n    return Boolean(hintAssistantInstance);\n};\n\nif (!startHintAssistant()) {\n    const hintInterval = setInterval(() => {\n        if (startHintAssistant()) clearInterval(hintInterval);\n    }, 750);\n}\n\nlet settings = settingsPanel.getSettings();\nsettingsPanel.onChange(newSettings => {\n    settings = newSettings;\n    setLoggingEnabled(settings.debugLogging);\n});\nsetLoggingEnabled(settings.debugLogging);\n\nlet commands = [];\nlet isDrawingActive = false;\nlet activeJobId = 0;\nlet pendingLoadId = 0;\nlet suppressStopStatus = false;\nconst corsProxyUrl = \"https://skribbl-io-autodraw-cors-proxy.galehouse5.workers.dev?\";\nconst SERVER_COMMANDS_PER_SECOND = 180;\nconst MAX_FRAME_BURST = 12;\n\nconst estimateTime = function (commandCount) {\n    if (!commandCount) return \"\";\n    const seconds = commandCount / SERVER_COMMANDS_PER_SECOND;\n    if (!Number.isFinite(seconds)) return \"\";\n    return `Est. ${seconds.toFixed(1)}s`;\n};\n\nconst loadImageWithFallback = function (imageUrl) {\n    if (!settings.useCorsProxy) return loadImage(imageUrl);\n    return loadImage(imageUrl)\n        .catch(() => loadImage(`${corsProxyUrl}${imageUrl}`));\n};\n\nconst handleDragEnter = function () {\n    if (!toolbar.isEnabled()) return;\n    domHelper.showCanvasOverlay(\"Drop image here to auto draw!\");\n};\n\nconst performToolbarClear = function () {\n    suppressStopStatus = true;\n    toolbar.clear();\n    suppressStopStatus = false;\n};\n\nconst drawImage = function (image, loadId) {\n    if (typeof loadId === \"number\" && loadId !== pendingLoadId) {\n        log(\"Discarded draw request for a stale image load.\");\n        return;\n    }\n\n    stopDrawing({ silent: true });\n    log(\"Clearing canvas...\");\n    performToolbarClear();\n\n    const jobId = ++activeJobId;\n\n    log(`Drawing ${image.width} x ${image.height} image...`);\n    settingsPanel.setStatus(\"Drawing...\");\n\n    let nextCommands = [];\n    try {\n        nextCommands = artist.draw(image, settings);\n    } catch (error) {\n        log(`Failed to generate draw commands: ${error instanceof Error ? error.message : error}`);\n        settingsPanel.setStatus(\"Drawing failed\");\n        domHelper.showCanvasOverlay(\"AutoDraw hit an error :(\");\n        domHelper.hideCanvasOverlay(2500);\n        return;\n    }\n\n    commands = nextCommands;\n    domHelper.hideCanvasOverlay();\n    const estimate = estimateTime(commands.length);\n    settingsPanel.setEstimate(estimate);\n\n    if (!commands.length) {\n        isDrawingActive = false;\n        settingsPanel.setStatus(\"Nothing to draw\");\n        settingsPanel.setEstimate(\"\");\n        return;\n    }\n\n    isDrawingActive = true;\n\n    processWithoutBlocking(commands, () => jobId !== activeJobId || !toolbar.isEnabled(), {\n        batchSize: MAX_FRAME_BURST,\n        maxCommandsPerSecond: SERVER_COMMANDS_PER_SECOND,\n        onFinish: () => {\n            if (jobId !== activeJobId) return;\n            isDrawingActive = false;\n            commands = [];\n            settingsPanel.setStatus(\"Done\");\n            settingsPanel.setEstimate(\"\");\n        },\n        onStop: () => {\n            if (jobId !== activeJobId) return;\n            isDrawingActive = false;\n            commands = [];\n            settingsPanel.setStatus(\"Stopped\");\n            settingsPanel.setEstimate(\"\");\n        }\n    });\n};\n\nconst stopDrawing = function (options = {}) {\n    const silentOption = Boolean(options.silent);\n    const statusText = options.statusText || \"Stopped\";\n    if (!isDrawingActive) return false;\n\n    isDrawingActive = false;\n    commands = [];\n    activeJobId++;\n    settingsPanel.setEstimate(\"\");\n    const shouldSilence = silentOption || suppressStopStatus;\n    if (!shouldSilence) settingsPanel.setStatus(statusText);\n    log(\"Drawing stopped.\");\n    return true;\n};\n\nconst loadImageFromSource = function (imageUrl, { overlayText, statusText, errorLabel }) {\n    stopDrawing({ silent: true });\n    const loadId = ++pendingLoadId;\n    settingsPanel.setEstimate(\"\");\n    settingsPanel.setStatus(statusText);\n    domHelper.showCanvasOverlay(overlayText);\n\n    const shouldRevoke = imageUrl.startsWith(\"blob:\");\n    let released = false;\n    const releaseUrl = function () {\n        if (released || !shouldRevoke) return;\n        URL.revokeObjectURL(imageUrl);\n        released = true;\n    };\n\n    loadImageWithFallback(imageUrl)\n        .then(image => {\n            releaseUrl();\n            if (loadId !== pendingLoadId) {\n                log(\"Discarded stale image load result.\");\n                return null;\n            }\n            return image;\n        })\n        .then(image => {\n            if (!image) return;\n            drawImage(image, loadId);\n        })\n        .catch(error => {\n            releaseUrl();\n            if (loadId !== pendingLoadId) return;\n            settingsPanel.setStatus(\"Loading failed\");\n            domHelper.showCanvasOverlay(\"Auto draw couldn't load image :(\");\n            domHelper.hideCanvasOverlay(2500);\n            log(`Couldn't load ${errorLabel}: ${imageUrl}. ${error?.message || error || \"\"}`);\n        });\n};\n\nconst handleDrop = function (event) {\n    event.preventDefault();\n\n    if (!domHelper.getCanvasContainerElement().contains(event.target))\n        return domHelper.hideCanvasOverlay();\n\n    if (!toolbar.isEnabled()) {\n        log(\"Can't draw right now.\");\n        return domHelper.hideCanvasOverlay();\n    }\n\n    log(\"Processing dropped content...\");\n    const imageUrl = getImgFileUrl(event.dataTransfer)\n        || getImgElementSrc(event.dataTransfer);\n    if (!imageUrl) {\n        domHelper.showCanvasOverlay(\"Auto draw couldn't load image :(\");\n        log(\"Dropped content not recognized.\");\n        return domHelper.hideCanvasOverlay(/* delay: */ 2500);\n    }\n\n    loadImageFromSource(imageUrl, {\n        overlayText: \"AutoDraw loading image...\",\n        statusText: \"Loading image...\",\n        errorLabel: \"image\"\n    });\n};\n\nconst handlePaste = function (event) {\n    if (!toolbar.isEnabled()) return;\n    const imageUrl = getClipboardImgUrl(event.clipboardData);\n    if (!imageUrl) return;\n\n    event.preventDefault();\n    loadImageFromSource(imageUrl, {\n        overlayText: \"AutoDraw loading pasted image...\",\n        statusText: \"Loading pasted image...\",\n        errorLabel: \"pasted image\"\n    });\n};\n\nlistenForDragDropEvents(document, handleDragEnter, domHelper.hideCanvasOverlay, handleDrop);\nclearToolElement.addEventListener(\"click\", () => {\n    if (!suppressStopStatus) pendingLoadId++;\n    stopDrawing();\n    domHelper.hideCanvasOverlay();\n});\nsettingsPanel.stopButton.addEventListener(\"click\", () => {\n    pendingLoadId++;\n    stopDrawing();\n    domHelper.hideCanvasOverlay();\n});\ndocument.addEventListener(\"paste\", handlePaste);\n"],
  "mappings": "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",
  "names": ["color", "domHelper", "color", "color", "canvas", "color", "canvas", "toolbar", "scale", "commands", "commands", "document", "clamp", "settings"]
}
